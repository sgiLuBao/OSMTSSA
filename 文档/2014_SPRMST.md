## 摘要

直线斯坦纳最小树（RSMT）问题是超大规模集成电路物理设计中的一个基本问题。在本文中，我们提出了一种基于迷宫路由的启发式方法来解决避障RSMT（OARSMT）问题。我们的方法可以在良好的质量和合理的运行时间内处理多针网。我们还提出了一个借助于图形处理单元（GPU）的并行启发式方法的实现。该并行算法采用CUDA实现，并在NVIDIA显卡上进行了测试。实验结果表明，我们的并行算法比顺序方法有很好的加速速度。本文证明了我们可以利用GPU应用并行算法来解决OARSMT问题。

## 1.引言

直线斯坦纳最小树(RSMT)问题是VLSI物理设计中的基本问题之一。在布图规划和布局阶段，RSMT可以应用于布线拓扑的构建。路由拓扑有助于我们估计线路长度、拥塞和时间。这种布线拓扑也可用作详细布线和全局布线阶段的初始网络拓扑。RSMT问题已被证明是NP完全的[1],在研究中引起了广泛关注。原问题假设布线区域没有障碍。然而，现代VLSI设计通常包含许多障碍，如宏单元、IP块和预路由网络。因此，避障RSMT (OARSMT)是一个更具实际意义的问题，近年来成为一个热门的研究课题。由于RSMT问题是NP完全的，障碍的存在甚至增加了问题的复杂性。现代集成电路可以由几十亿个晶体管组成。VLSI设计日益增加的复杂性引起了人们对并行算法方法的兴趣。然而，电子设计自动化(EDA)工具中使用的大多数算法是顺序的。无法有效地解析数据和控件依赖关系。近年来，由于其低成本和高性能，在图形处理单元(GPU)上使用通用计算已经变得流行。为了解决OARSMT的复杂性问题，应用GPU是一个潜在的解决方案。

有许多研究工作集中在RSMT和奥斯马特问题上。Clarkson等人[2]仅考虑了2针网络，并提出了一种复杂度为o-n-LG n \u 2的算法来计算两针之间的直线最短路径，以避开多边形障碍物，其中n是针的数量和障碍物边界。Wu等人[3]引入了一种称为轨迹图的稀疏连接图，以减少计算两点间最短避障路径的搜索空间。Ganley和Cohoon [4]提出了一种算法来构造最优的3端或4端OARSMT。分别为少于20个终端的情况开发了称为G3S、G4S和B3S的启发式算法。郑等人[5]提出了一种算法，使用隐式连接图方法来寻找避障最短路径。Yang等人[6]提出了一个复杂的4步启发式算法来解决OARSMT问题。当终端数量少于七个并且障碍物是凸形的时，他们的方法工作得很好。胡等人[7]开发了一种高效的分层启发式算法，称为FORst。OARSMT是使用基于连接图的方法构建的。他们的方法可以有效地解决大规模问题。在蚁群优化算法的基础上，胡等人[8]提出了另一种非确定性的局部搜索启发式算法，称为An-OARSMan算法。它可以处理带有凹凸形状的复杂障碍的小规模OARSMT问题。尽管划桨手在处理复杂障碍时更加灵活，但对于大型设计来说，它需要非常长的运行时间。后来，石等人提出了CDCTree[9]。它基于电流驱动电路模型，并且这种方法可以实现比划桨者更短的导线长度。

Shen等人[10]提出了一种基于连接图的方法来解决OARSMT问题。冯等[11]提出了一种利用Delaunay三角剖分在任意λ几何上构造避障Steiner树的方法。它的运行时间复杂度只是oπn LG n，其中n是终端和障碍物的总数。Wu等人[12]提出，一种方法首先通过应用划分方法找到所有终端的最小生成树。与障碍物相交的线段被去除，形成一组子树。然后，使用基于蚁群优化的方法将子树连接回单个树，该单个树在末端被直线化以给出OARSMT。Hentschke等人[13]提出了AMAZE，一种基于快速迷宫路由的算法来构建Steiner树。然而，当处理多条路径时，该算法采用传统的从多条路径中仅选择一条路径的方式，并带有偏置技术。Lin等人[14]扩展了[10]中基于连接图的方法，确定了许多“基本”边，这些边可以在避障生成图的构造中产生更理想的解决方案。他们还显著改进了[10]中的OARSMT转化程序。他们为OARSMT中的U形连接开发了一种有效的改进方案，以进一步减少总电线长度。Long等人[15]提出了一种高效的四步算法来构建OARSMT。他们提出了最小终端跨度的快速算法。Li和Young [16]提出了一种基于扩展Hanan网格的迷宫路由方法，该方法在其他工作中获得了最高的解质量。Liu等人[17]提出了一个有效的基于路径的框架来解决OARSMT构造问题，并提出了一个o-n log n时间算法。后来，Ajwani等人[18]提出了一种使用OASG的自顶向下划分方法，并使用障碍感知版本的FLUTE构建了OARSMT。最近，Huang和Young [19]提出了一个精确的最优OARSMT构造算法，该算法可以处理复杂的直线障碍。

一般认为，基于迷宫路由的方法只适用于小规模问题。主要的缺点是缺乏一个多终端变量来处理多针网络。此外，当路由区域扩大时，其时间复杂度和内存使用会变得非常大。在本文中，我们证明了基于迷宫路由的方法也可以有效地处理大规模的OARSMT问题。在我们的算法中，为了处理多引脚网络，引脚之间的最短路径的多个候选被保留，直到到达所有引脚。形成由最短路径的所有候选组成的图，并且构造该图的MST以创建OARSMT。然后执行后处理步骤以进一步减少总的线路长度。通过使用堆数据结构并在简化的Hanan网格上传播，有效地实现了迷宫路由器。这个简化的Hanan网格由删除了位于障碍物内的所有交点的原始Hanan网格形成。此外，我们还将避障逃生图转化为基于数组的数据结构。提出了一种基于多针迷宫布线算法的并行方法，该算法可以在GPU上高效执行。虽然在各种计算应用中使用GPU已经显示出令人兴奋的加速，但在EDA中使用GPU并不像在其他领域那样普遍。它们只包括VLSI设计验证[20]，布局规划[21]和电网分析[22]。利用GPU友好的数据结构和迷宫路由算法，我们提出了一个基于GPU的算法，它可以在我们的基于CPU迷宫路由的OARSMT算法上实现显著的加速。我们的工作也证明了通过适当地应用基于GPU的算法，我们可以用并行计算来解决OARSMT问题。

本文的问题公式如第二节所示。我们所提出的方法，包括顺序方法和并行方法，将在第3节中进行讨论。实验结果在第4节中被显示和讨论。

## 2.问题制定

避障直线Steiner最小树(OARSMT)问题可以用许多不重叠的直线障碍和一组销来公式化。设B = b1B2；…;bkg是二维空间r中的一组不重叠的直线阻塞，设P = p1p2；…;pmg是R中m针网络的一组针，使得没有针pi AP位于障碍物bj AB内。在这个OARSMT问题中，我们构造了一个直线Steiner最小树来连接P中的所有引脚，以实现最小的总长度(通过Manhanttan距离来测量)，同时避免与r中的任何阻塞相交。

在OARSMT问题中，一个大头针不能躺在障碍物的内部，但它可以躺在障碍物的角落或障碍物的边界上。一个障碍不能与另一个障碍重叠，但它可以在一个角落指向另一个障碍或在一个边界处碰线。OARSMT的边缘不能与堵塞物相交，但它可以沿着障碍物的边界运行。