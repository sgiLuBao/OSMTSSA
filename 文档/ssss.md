## 摘要

电路互连已经成为高性能系统设计中的一大障碍。在本文中，我们探索了一种新的布线模式，通过直接减少线路长度来解决互连问题的根源。我们提出了一种非曼哈顿斯坦纳树启发式算法，与直线拓扑相比，平均减少了17%的布线长度。此外，我们提出了一种基于图的互连优化算法，称为GRATS-tree算法，它允许性能优化超过仅通过减少导线长度所能获得的性能优化。这两种树构造算法被集成到一个新的全局路由器中，该路由器允许大规模的非曼哈顿设计。尽管我们考虑在直线目标下进行电路布局，但我们的全局路由器可以将最大拥塞程度降低20%。一般来说，我们发现非曼哈坦方法需要额外的斯坦纳点和弯曲；非曼哈顿布线结构的实现需要额外的通孔。我们观察到通孔成本的增加比预期的要显著得多；导线长度减少的好处可能超过额外的通孔成本。

## 引言

在本文中，我们探索了一个与传统方法有本质上不同的电路设计范式。我们考虑了非曼哈顿结构的广泛使用（与目前的设计方法几乎完全是直线的相比）。这项工作的动机来自于对电路设计者当前所面临的问题的考虑。电路互连对总电路延迟、功耗和电噪声[2]有重大贡献；任何能使这种影响最小化的技术都是值得关注的。

非曼哈顿路由并不是新的——许多信道路由方法通过使用对角线段[9；12；13；6]，非曼哈顿路由模型的层次斯坦纳树构造已经被提出[11]，非曼哈顿设计工具已经开发出[10]。然而，非曼哈顿路由的使用规模非常小；我们对大规模使用的影响很感兴趣。我们有两个主要问题：首先，非曼哈顿设计对路由拥塞的影响是什么，第二，我们可以期望什么性能和导线长度的影响。

我们已经开发了互连优化算法和一个新的全球路由器，以允许这些问题被探索。我们的设计范式假设我们可以生成互联结构（在全球层面），这些结构的方向而不是垂直或水平。在本文中，我们采用[11]的术语，并将使用A-agfer，其中A表示主要路由方向的数量（间隔使角度均匀分配）。2-几何是指传统的曼哈顿路由；4-几何是指在X轴和Y轴上添加对角线路由45度的曼哈顿路由。3几何指的是路由度量，我们有三个主轴，间隔60度。初步结果表明，与传统的直线路由模型相比，线路互连长度和拥塞有了显著的改善。据我们所知，这是第一次深入研究大规模非曼哈顿路由体系结构的可行性。

本文的其余部分组织如下：在第2节中，我们描述了我们新的全局路由器，它遵循[5]的方法。在第3节中，我们描述了我们基于[1]的非曼哈顿斯坦纳树算法。在第4节中描述了一种适用于所提出的拓由方法的性能驱动的拓扑生成算法。实验结果，显示路由树线长度和通过行业基准的估计在第5节。我们还展示了结果显示我们的全局路由器在各种路由网格上的性能。我们以第6节来结束本文。

## 2.基于图的全局路由

实现非曼哈顿路由方法的一个主要障碍是全局路由。标准的单元设计通常对单元和单元行施加矩形限制。宏块设计也强调矩形形状。用于互连电线的剩余区域也是矩形的，导致主要是直线路线（非曼哈顿通道路由可能除外）。

最近，这些直线逻辑块的影响已经减少。目前的制造过程已经使过单元路由变得实用，消除了标准单元行和宏块的障碍。多芯片模块（MCMs）提供没有物理障碍的路由区域。在这些新的条件下，我们增加了自由度，并可以探索新的路由范式。

我们新的全局路由器遵循[5]的方法，即整个路由区域被划分为一组磁块，位于逻辑元素的正上方。全局路由决定了瓷砖之间的连接所采取的路径。在每个平铺中，一个详细的路由器决定了精确的路由。

### 2.1路由范例

我们假设路由将发生在逻辑元素的“上面”，并且在路由区域中没有直线障碍。由于没有这些障碍，因此可以使用全球非曼哈顿航线。然而，在[5]中使用的直线路由网格显然不适用于非曼哈顿指标。为了支持全局非曼哈顿路由，我们的新的全局路由器除了支持直线倾斜外，还支持六边形、三角形和八角形倾斜；这些瓷砖如图1所示。对于六角形和三角形的瓷砖，瓷砖的大小和形状一致；对于八角形的瓷砖，有一个八边形和正方形的混合物，允许整个路由区域被覆盖。

我们关注的是从一个瓷砖传递到另一个瓷砖的路由的数量（或总宽度）；这是拥塞。高质量的全局路由将跨平铺边界均匀地分布连接，从而降低最大拥塞级别。在实践中，我们观察到大多数连接是通过最短路径路由获得的；平均拥塞水平并没有因为路由绕道而显著增加。

为了允许路由度量之间的比较，我们确保各种平铺方法的平铺边界长度是相等的。请注意，这导致了瓷砖面积的显著差异（三角形瓷砖的面积最小，而八角形瓷砖有大瓷砖的混合物，以及面积等于直线瓷砖的瓷砖）。

路由成本和能力是根据逐层计算来确定的。图公式允许这个路由器考虑一个任意的路由表面，具有任意数量的路由层和方向。混合网格，包含直线和非直线区域的混合物，或具有不同层数和首选方向的区域，可以由路由器来处理。

### 2.2全球路由方法

与[5]中的全局路由器一样，路由首先是为每个网络构建斯坦纳树，然后将每个树的边缘嵌入到路由网格中。单独的边缘路由由迭代的提示和重新路由决定，最大限度地减少路由拥塞。斯坦纳树的构造是通过我们对[1]算法的修改来完成的，并将在下一节中进行描述。

对于需要比通过简单地减少线路长度所能获得的更高性能的信号网络，我们采用一种性能驱动的互连算法，称为GRATS-tree算法。一般来说，通常有几种拓扑满足给定网络的时序目标。第4节中描述的GRATS-tree算法为时序关键网产生了许多可能的互连结构；这些结构在一般的路由图上提供了信号延迟、路由区域和路由拥塞等级之间的折衷。

在实际的设计问题中，我们可以预期一些地区比其他地区更拥挤。可用于计时关键网络的各种互连结构允许全局路由器在这些网络的路由中有一定的自由度。与在[5]中一样，我们使用迭代删除来选择特定的互连结构，以获得性能目标，并最小化拥塞。

这种方法克服了传统的单网互连优化的固有局限性。因为每个网络只构造一个“最优”拓扑，任何通用性能驱动的全局路由器都会探索一个高度限制的解决方案空间，而以这种方式构建的任何全局路由解决方案的拥塞都会高得不可接受。通过将GRATS-tree算法与全局路由器的迭代删除方法相结合，我们可以在满足性能目标的同时改善整体拥塞。

## 3.非曼哈顿斯坦纳树建设

直线距离度量的斯坦纳树构造已经得到了很好的研究，并提出了一些启发式方法。1-Steiner [7]算法在初始生成树中逐步添加一个斯坦纳点，比最小生成树长度获得了近11%的改进。Borah、Owen和Irwin [1]的边缘去除技术，我们称之为“BOI”算法，通过在顶点和现有边之间添加一条新边来修改一个初始的边，然后去除一条冗余边；该启发式获得了与lSteiner算法相当的树长缩减，并且具有较低的复杂度。然而，对于非曼哈顿斯坦纳树，已知的方法相对较少；[11]的方法首先构造一个最小生成树，然后执行一个层次改进过程。对于直线路由，该算法得到了10.3%的改进；非曼哈顿的结果没有报道。在[8]中，利用德劳内三角剖分的方法对45个°路由问题比直线斯坦纳树获得了11.8%的改进。

我们的全局路由器采用了一种非曼哈顿斯坦纳树算法。该算法反复地将一个顶点连接到一条现有的边上（引入一个斯坦纳点），然后在一个生成的循环中删除一条边。将顶点连接到边缘的“合并”函数已经被修改为新的路由度量。

### 3.1.斯坦纳点位置

虽然对于A = 3或A = 4 [11]没有等效的Hanan网格，但找到一个最佳Steiner点来连接三个现有的点是很容易的。候选Steiner点可以在通过两个初始点的两个轴对齐向量的交点处找到(或者在三个初始点之一的顶部)；这些点中的一个将是最佳的。图3.1显示了在A = 4路由度量中连接三个初始点的Steiner点；Steiner点位于通过两个初始点的两个向量的交点处。对于任何基于A的路由度量，我们生成候选Steiner点的集合(不超过O(A ^ 2)个可能位置)，然后选择最佳观测值。对于固定A，这个操作是常数时间。我们对[1]的算法的改进每次运行时间为O(n ^ 2 ),并且需要相对较少的次数。

证明这一性质的草图如下。假设我们有三个点A，B，C，也有最优Steiner点S，这个连接的代价(用距离度量din)是dm (A，S)+ d，，~(B，S) + din(C，S)。通过沿着路由度量允许的方向之一移动Steiner点S，该成本线性变化；如果所有三个连接都需要弯曲，我们可以清楚地移动斯坦纳点，以便至少消除一个弯曲。从一个连接中消除了一个弯曲后，Steiner点现在位于通过原始点之一的轴对齐向量上。我们现在可以沿着这个轴对齐的向量重复移动过程，直到我们遇到一个原始点，或者从第二个连接中消除一个弯曲。

